<sga-panel id="UtilityParameters" title="Utility parameters" titleSize="24px">
  <form body class="container-fluid" [formGroup]="utilityParamsForm" (ngSubmit)="submitForm()">
    <div class="row mb-5">
      <div class="col-md-5">
        <app-form-field formControlName="HOURS_OF_OPERATION"
                        name="HOURS_OF_OPERATION"
                        [label]="'HOURS_OF_OPERATION' | translate"
                        [error]="fieldValidation('HOURS_OF_OPERATION')"
                        [required]="isRequired('HOURS_OF_OPERATION')"></app-form-field>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <sga-panel id="FuelPanel"
                   [title]="'FUEL' | translate"
                   titleTooltip="Fuel info tooltip"
                   background="#EDF2F4">
          <div body>
            <app-form-field [options]="['Natural Gas', 'some 2', 'some 3']"
                            #fuelType
                            formControlName="FUEL_TYPE"
                            name="FUEL_TYPE"
                            type="select"
                            [error]="fieldValidation('FUEL_TYPE')"
                            [label]="'FUEL_TYPE' | translate"></app-form-field>
            <app-form-field formControlName="FUEL_CALORIFIC_VALUE"
                            name="FUEL_CALORIFIC_VALUE"
                            type="number"
                            unit="kWh/kWh"
                            [error]="fieldValidation('FUEL_CALORIFIC_VALUE')"
                            [required]="isRequired('FUEL_CALORIFIC_VALUE')"
                            [label]="'FUEL_CALORIFIC_VALUE' | translate"></app-form-field>
            <ng-container *ngIf="fuelType.model === 'Natural Gas'">
              <app-form-field formControlName="cO2EmissionsUnitFuel"
                              [filled]="true"
                              type="number"
                              unit="kg/kWh"
                              label="CO2 emissions / unit fuel"></app-form-field>
              <app-form-field formControlName="costOfFuelUnit"
                              [filled]="true"
                              type="number"
                              unit="£/kWh"
                              label="Cost of Fuel / unit"></app-form-field>
            </ng-container>
            <app-form-field formControlName="IS_FUEL_COMSUMPTION_MEASURED"
                            type="yesNo"
                            name="IS_FUEL_COMSUMPTION_MEASURED"
                            label="Is Fuel Comsumption Measured?">
              <ng-container yes>
                <app-form-field formControlName="COST_OF_FUEL_YEAR"
                                type="radioInput"
                                group="costOfFuelYear"
                                unit="£/y"
                                label="Cost of fuel / year"></app-form-field>
                <app-form-field formControlName="FUEL_CONSUMPTION_YEAR"
                                type="radioInput"
                                group="costOfFuelYear"
                                unit="m3/y"
                                label="Fuel Consumption / year"></app-form-field>
              </ng-container>
            </app-form-field>
          </div>
        </sga-panel>

        <sga-panel id="CO2EmissionPanel" title="CO2 Emission" titleTooltip="Tooltip" background="#EDF2F4">
          <div body>
            <app-form-field formControlName="areCO2OrCarbonEmissionsTaxed"
                            name="areCO2OrCarbonEmissionsTaxed"
                            type="yesNo"
                            label="Are CO2 or carbon emissions taxed?">
              <ng-container yes>
                <app-form-field formControlName="carbonLeviTaxUnit"
                                type="radioInput"
                                unit="???"
                                group="areCO2OrCarbonEmissionsTaxed"
                                [required]="true"
                                label="Carbon levi tax / unit"></app-form-field>
                <app-form-field formControlName="costOfCo2UnitMax"
                                type="radioInput"
                                unit="???"
                                group="areCO2OrCarbonEmissionsTaxed"
                                [required]="true"
                                label="cost of co2 / unit max"></app-form-field>
              </ng-container>
            </app-form-field>
          </div>
        </sga-panel>
      </div>

      <div class="col-md-6">
        <sga-panel id="WaterPanel" title="Water" titleTooltip="Tooltip" background="#EDF2F4">
          <div body>
            <app-form-field formControlName="costOfWaterUnt"
                            label="Cost of Water / Unt"
                            unit="£/m3"
                            [required]="true"></app-form-field>
            <app-form-field formControlName="isWaterEnteringBoilerHouseMeasured"
                            name="isWaterEnteringBoilerHouseMeasured"
                            label="Is water entering the boiler house measured?"
                            type="yesNo">
              <ng-container yes>
                <app-form-field formControlName="costOfWaterYear"
                                label="Cost of Water / year"
                                unit="£/y"
                                type="radioInput"
                                group="isWaterEnteringBoilerHouseMeasured"
                                [required]="true"></app-form-field>
                <app-form-field formControlName="waterConsumptionHour"
                                label="Water Consumption / hour"
                                unit="m3/h"
                                type="radioInput"
                                group="isWaterEnteringBoilerHouseMeasured"
                                [required]="true"></app-form-field>
                <app-form-field formControlName="waterConsumptionYear"
                                label="Water Consumption / year"
                                unit="m3/y"
                                type="radioInput"
                                group="isWaterEnteringBoilerHouseMeasured"
                                [required]="true"></app-form-field>
              </ng-container>
            </app-form-field>
          </div>
        </sga-panel>

        <sga-panel id="waterTreatmentChemicalsPanel" title="Water treatment chemicals" titleTooltip="Tooltip" background="#EDF2F4">
          <div body>
            <app-form-field type="yesNo" name="areChemicalCostKnown" label="Are chemical cost known?">
              <ng-container yes>
                <app-form-field [required]="true" type="number" label="Total chemical costs / year" unit="£/y"></app-form-field>
                <app-form-field type="number" label="O2 scavenging chemical costs / year" unit="£/y"></app-form-field>
              </ng-container>
            </app-form-field>
          </div>
        </sga-panel>

        <sga-panel id="waterEffluentPanel" title="Water effluent" titleTooltip="Tooltip" background="#EDF2F4">
          <div body>
            <app-form-field [required]="true" type="number" label="Cost of effluent / unit" unit="£/m3"></app-form-field>
          </div>
        </sga-panel>
      </div>
    </div>
  </form>
</sga-panel>

<sga-panel [isCollapsed]="true" [showSeparator]="false" id="BoilerHouseParameters" title="Boiler house parameters" titleSize="24px">
  <div body class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <tabset type="pills" class="sgaTabs">
          <tab heading="Boiler" customClass="sgaTab">
            <sga-panel id="boilerParametersPanel" title="Boiler parameters" background="#EDF2F4">
              <form body [formGroup]="boilerParamsForm" class="row">
                <div class="col-md-6 border-r-md">
                  <app-form-field type="yesNo" name="isSteamSuperheated" label="Is Steam Superheated?"></app-form-field>
                  <app-form-field type="yesNo" name="isSteamFlowMeasured" label="Is steam flow measured?">
                    <ng-container yes>
                      <app-form-field type="radioInput"
                                      [required]="true"
                                      group="isSteamFlowMeasured"
                                      name="steamGenerationHour"
                                      unit="kg/h"
                                      label="Steam generation / hour"></app-form-field>
                      <app-form-field type="radioInput"
                                      [required]="true"
                                      group="isSteamFlowMeasured"
                                      name="steamGenerationYear"
                                      unit="tonnes/y"
                                      label="Steam generation / year"></app-form-field>
                    </ng-container>
                  </app-form-field>
                </div>
                <div class="col-md-6">
                  <app-form-field name="steamTemperature" unit="°C" label="Steam Temperature"></app-form-field>
                  <app-form-field [required]="true"
                                  name="steamPressure"
                                  unit="bar gauge"
                                  label="Steam Pressure"></app-form-field>
                  <app-form-field type="yesNo" name="isEconomiserPresent" label="Is Economiser Present?"></app-form-field>
                  <app-form-field [filled]="true"
                                  [required]="true"
                                  type="number"
                                  formControlName="boilerEfficiency"
                                  name="boilerEfficiency"
                                  label="Boiler Efficiency"
                                  unit="%"></app-form-field>
                </div>
              </form>
            </sga-panel>
          </tab>
          <tab heading="TDS BLOWDOwn" customClass="sgaTab">
            <sga-panel id="blowdownEquipmentPanel" title="Blowdown equipment" background="#EDF2F4">
              <div class="row" body>
                <div class="col-md-4 border-r-md">
                  <app-form-field type="yesNo"
                                  name="isBlowdownVesselPresent"
                                  label="is blowdown vessel present?"></app-form-field>
                  <app-form-field type="yesNo"
                                  name="isCoolingWaterUsed"
                                  label="is cooling water used?"></app-form-field>
                </div>
                <div class="col-md-4 border-r-md">
                  <app-form-field type="yesNo"
                                  name="isAutoTdsPresent"
                                  label="Is auto tds present?"></app-form-field>
                  <app-form-field type="yesNo"
                                  name="isFlashVesselPresent"
                                  label="Is flash vessel present?"></app-form-field>
                </div>
                <div class="col-md-4">
                  <app-form-field type="yesNo"
                                  name="isHeatExchangerPresent"
                                  label="Is heat exchanger present?"></app-form-field>
                  <app-form-field [filled]="true"
                                  name="waterTemperatureLeavingHeatExchange"
                                  unit="°C"
                                  label="water temperature leaving heat exchange"></app-form-field>
                </div>
              </div>
            </sga-panel>
            <sga-panel id="tdsBlowdownParametersPanel" title="tds Blowdown parameters" background="#EDF2F4">
              <div class="row" body>
                <div class="col-md-4 border-r-md">
                  <app-form-field [required]="true"
                                  name="tDSOfFeedwater"
                                  unit="ppm"
                                  label="TDS of feedwater"></app-form-field>
                </div>
                <div class="col-md-4 border-r-md">
                  <app-form-field [required]="true"
                                  name="averageBoilerTds"
                                  unit="ppm"
                                  label="Average boiler tds"></app-form-field>
                </div>
                <div class="col-md-4">
                  <app-form-field [required]="true"
                                  name="maximumAllowableBoilerTDS"
                                  unit="ppm"
                                  label="maximum allowable boiler TDS"></app-form-field>
                </div>
              </div>
            </sga-panel>
          </tab>
          <tab heading="Water Treatment" customClass="sgaTab">
            <sga-panel id="makeUpWaterPanel" title="Make-up water" background="#EDF2F4">
              <div class="row" body>
                <div class="col-md-6 border-r-md">
                  <app-form-field type="yesNo"
                                  name="isMakeUpWaterMonitored"
                                  label="Is make-up water monitored?">
                    <ng-container yes>
                      <app-form-field [required]="true"
                                      name="temperatureOfMakeUpWater"
                                      unit="°C"
                                      label="Temperature of make-up water"></app-form-field>
                    </ng-container>
                  </app-form-field>
                </div>
                <div class="col-md-6">
                  <app-form-field [required]="true"
                                  type="radioInput"
                                  group="makeUpWater"
                                  name="makeUpWaterHour"
                                  unit="m3/h"
                                  label="make-up water/hour"></app-form-field>
                  <app-form-field [required]="true"
                                  type="radioInput"
                                  group="makeUpWater"
                                  name="makeUpWaterYear"
                                  unit="m3/h"
                                  label="make-up water/year"></app-form-field>
                </div>
              </div>
            </sga-panel>
            <sga-panel id="waterTreatmentParametersPanel" title="water treatment parameters" background="#EDF2F4">
              <div class="row" body>
                <div class="col-md-4">
                  <app-form-field name="waterTreatmentMethod"
                                  type="select"
                                  [options]="['Base Exchange', '2', '3']"
                                  label="water treatment method"></app-form-field>
                </div>
                <div class="col-md-4">
                  <app-form-field [required]="true"
                                  unit="%"
                                  label="Percentage water rejection"
                                  name="percentageWaterRejection"></app-form-field>
                </div>
                <div class="col-md-4">
                  <app-form-field [required]="true"
                                  unit="ppm"
                                  label="tds of makeup water"
                                  name="tdsOfMakeupWater"></app-form-field>
                </div>
              </div>
            </sga-panel>
          </tab>
          <tab heading="Feedwater & Condensate" customClass="sgaTab">
            <sga-panel id="deaeratorTypePanel" title="Deaerator type" background="#EDF2F4">
              <div class="row" body>
                <div class="col-md-4">
                  <app-form-field type="radio"
                                  [(model)]="deaeratorType"
                                  value="autmosphericDeaerator"
                                  id="autmosphericDeaeratorId"
                                  name="deaeratorType"
                                  label="Autmospheric Deaerator">
                    <img before
                         class="checkImage"
                         src="/assets/img/steam_generation/deaerator_type_1.png"
                         alt="deaerator_type_1">
                  </app-form-field>
                </div>
                <div class="col-md-4">
                  <app-form-field type="radio"
                                  [(model)]="deaeratorType"
                                  value="pressurlsedDeaerator"
                                  id="pressurlsedDeaeratorId"
                                  name="deaeratorType"
                                  label="Pressurlsed Deaerator">
                    <img before
                         class="checkImage"
                         src="/assets/img/steam_generation/boiler-scheme/images/PressurisedDAImgCrop.png"
                         alt="deaerator_type_1">
                  </app-form-field>
                </div>
              </div>
            </sga-panel>
            <sga-panel id="boilerFeedwaterPanel" title="Boiler feedwater" background="#EDF2F4">
              <div class="row" body>
                <div class="col-md-4 border-r-md">
                  <app-form-field type="yesNo" name="isFeedwaterFlowrateMeasured" label="Is feedwater flowrate measured?">
                    <ng-container yes>
                      <app-form-field [required]="true"
                                      type="radioInput"
                                      group="isFeedwaterFlowrateMeasured"
                                      name="consumptionHr"
                                      label="Consumption/hr"
                                      unit="m3/h"></app-form-field>
                      <app-form-field [required]="true"
                                      type="radioInput"
                                      group="isFeedwaterFlowrateMeasured"
                                      name="consumptionHr"
                                      label="Consumption/year"
                                      unit="m3/y"></app-form-field>
                    </ng-container>
                  </app-form-field>
                </div>
                <div class="col-md-4 border-r-md">
                  <app-form-field [required]="true"
                                  name="temperatureOfFeedtank"
                                  unit="°C"
                                  label="temperature of feedtank"></app-form-field>
                  <app-form-field [required]="true"
                                  name="TDSOfFeedwaterInFeedtank"
                                  unit="ppm"
                                  label="TDS of feedwater in feedtank"></app-form-field>
                  <app-form-field type="yesNo"
                                  name="areChemicalsAddedDirectlyToTheFeedtank"
                                  label="Are chemicals added directly to the feedtank?"></app-form-field>
                </div>
                <div class="col-md-4">
                  <app-form-field type="yesNo" name="isDsiPresent" label="Is dsi present">
                    <ng-container yes>
                      <app-form-field [required]="true"
                                      name="pressureOfSteamSupplyingDSI"
                                      unit="barg"
                                      label="Pressure of steam supplying DSI"></app-form-field>
                    </ng-container>
                  </app-form-field>
                </div>
              </div>
            </sga-panel>
            <sga-panel id="condensateReturnPanel" title="CONDENSATE RETURN" background="#EDF2F4">
              <div class="row" body>
                <div class="col-md-6 border-r-md">
                  <app-form-field type="yesNo" name="isCondensateReturnKnown" label="is condensate return known?">
                    <ng-container yes>
                      <app-form-field type="radioInput"
                                      [required]="true"
                                      group="isCondensateReturnKnown"
                                      name="percentageOfCondensateReturned"
                                      unit="%"
                                      label="Percentage of condensate returned"></app-form-field>
                      <app-form-field type="radioInput"
                                      [required]="true"
                                      group="isCondensateReturnKnown"
                                      name="volumeOfCondensateReturned"
                                      unit="m3/y"
                                      label="Volume of condensate returned"></app-form-field>
                    </ng-container>
                  </app-form-field>
                </div>
                <div class="col-md-6">
                  <app-form-field [required]="true"
                                  name="temperatureOfCondensateReturned"
                                  unit="°C"
                                  label="temperature of CONDENSATE RETURNED"></app-form-field>
                  <app-form-field [required]="true"
                                  name="tdsOfCondensateReturned"
                                  unit="ppm"
                                  label="TDS of CONDENSATE RETURNED"></app-form-field>
                </div>
              </div>
            </sga-panel>
          </tab>
        </tabset>
      </div>

      <div class="col-md-2"></div>
      <div class="col-md-8">
        <app-boiler-scheme [feedWater]="deaeratorType === 'autmosphericDeaerator' ? 'main' : 'main_PRESSURE'"></app-boiler-scheme>
      </div>
    </div>
  </div>
</sga-panel>
